<script>

    const CHOICES = ['rock', 'paper', 'scissors']

    function getComputerChoice() {
        let randomIndex = Math.floor(Math.random() * 3);
        return CHOICES[randomIndex];
    }

    function getPlayerChoice() {
        return prompt('Choose either rock, paper or scissors').toLowerCase();
    }

    function isDraw(computerSelection, playerSelection) {
        return computerSelection === playerSelection;
    }

    function getWinner(computerSelection, playerSelection) {
        switch (playerSelection) {
            case 'rock':
                return (computerSelection == 'paper') ? 'computer' : 'player';
            case 'paper':
                return (computerSelection == 'scissors') ? 'computer' : 'player';
            case 'scissors':
                return (computerSelection == 'rock') ? 'computer' : 'player';
        }
    }

    function playRound() {
        let computerSelection = getComputerChoice();
        let playerSelection = getPlayerChoice();

        if (CHOICES.includes(playerSelection)) {
            if (isDraw(computerSelection, playerSelection)) {
                console.log("It's a draw!");
            } else if (getWinner(computerSelection, playerSelection) === 'player') {
                console.log(`You won! ${playerSelection} beats ${computerSelection}`);
            } else {
                console.log(`You lose! ${computerSelection} beats ${playerSelection}`);
            }
        } else {
            console.log("You've entered an unknown action. Please input either rock, paper or scissors");
        }
    }

    function game() {
        for (let i = 0; i < 5; i++) {
            playRound();
        }
    }

</script>